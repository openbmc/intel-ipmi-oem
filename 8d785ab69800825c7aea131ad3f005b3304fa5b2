{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cd312627_b17cc045",
        "filename": "src/biosconfigcommands.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1167,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-02-24T01:24:12Z",
      "side": 1,
      "message": "This should be done via the filter rather than here. That\u0027s what one of the main things the filter does; restrict commands based on interface.",
      "revId": "8d785ab69800825c7aea131ad3f005b3304fa5b2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45c47f83_cf874dcb",
        "filename": "src/biosconfigcommands.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1167,
      "author": {
        "id": 1001049
      },
      "writtenOn": "2022-02-25T05:15:12Z",
      "side": 1,
      "message": "This is not a code we recently added. It was existing code which accidently got removed in one my patches. And now adding back. Details are given in the commit message. \n\nIf you what to change IsSystemInterface all together. There are multiple places using this in same file. We can discuss and remove it. \n\nPlease provide your suggestion.",
      "parentUuid": "cd312627_b17cc045",
      "revId": "8d785ab69800825c7aea131ad3f005b3304fa5b2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca5c9151_e22986ad",
        "filename": "src/biosconfigcommands.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1167,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-02-25T19:17:49Z",
      "side": 1,
      "message": "Rather than this change to add a call to IsSystemInterface() here, I would prefer a change to simply add the appropriate mask to the filter config file.\n\nFuture commits can be introduced to remove other individual calls to IsSystemInterface() and replace them with the appropriate mask in the filter config file.",
      "parentUuid": "45c47f83_cf874dcb",
      "revId": "8d785ab69800825c7aea131ad3f005b3304fa5b2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4fc4a4b9_e4a4e077",
        "filename": "src/biosconfigcommands.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1167,
      "author": {
        "id": 1000652
      },
      "writtenOn": "2022-03-08T10:00:25Z",
      "side": 1,
      "message": "If we remove IsSystemInterface() and use the code in the filter config file, before post complete/coreBios done, other channel commands are giving success response.\nAfter post complete/coreBios done, all the channels are blocked.\nBefore post:\nroot@intel-obmc:~# ipmitool -I lanplus -H xx.xx.xx.xx -U debuguser -P 0penBmc1 -C 17 raw 0x30 0xd8\n61 d1 7b 22 c1 18 03 33 1a 98 34 3e d5 6e b8 b3\n89 98 6e 7d a1 c2 45 b4 c7 49 1e 78 7d b2 3c 71\n00 94 b2 73 14 ed e2 fd bc eb 32 6a 59 a3 8d b3\n1d 93 95 d1 a4 4c 54 16 88 9f 4b 94 24 5d a7 c1\n4a 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00\nAfter post: \nroot@intel-obmc:~# ipmitool -I lanplus -H xx.xx.xx.xx -U debuguser -P 0penBmc1 -C 17 raw 0x30 0xd8\nUnable to send RAW command (channel\u003d0x0 netfn\u003d0x30 lun\u003d0x0 cmd\u003d0xd8 rsp\u003d0x82): Unknown (0x82)",
      "parentUuid": "ca5c9151_e22986ad",
      "revId": "8d785ab69800825c7aea131ad3f005b3304fa5b2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3911ca27_80508427",
        "filename": "src/biosconfigcommands.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1167,
      "author": {
        "id": 1000418
      },
      "writtenOn": "2022-03-08T15:33:12Z",
      "side": 1,
      "message": "As we discussed offline (with Arun, P M), Just with below changeset:\nPlease push the new patchset accordingly.\n\nA. For KCS Policy !\u003d Allow_all\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nIt blocks this command execution in all channels, and allows this command ONLY in KCS channels ONLY before \"Core BIOS Done\" or \"End of Post\". \nIt is inline with the requirement.\nRef: https://github.com/openbmc/intel-ipmi-oem/blob/c9290e755fdfa7e6efb0be0da52532a826777a0f/src/whitelist-filter.cpp#L436\n\nB. For KCS Policy \u003d\u003d Allow_all\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nSimilar to above (A.)\nExcept that this command is allowed in KCS even after \"Core BIOS Done\" or \"End of Post\". \nUsually, Allow_all is not recommended setting and user is warned about it, and hence this behavior may be ok.\n@Vernon: Please confirm.\n\n--- a/ipmi-whitelist.conf\n+++ b/ipmi-whitelist.conf\n@@ -290,7 +290,7 @@\n 0x30:0xd5:0x7f7f   //\u003cIntel General Application\u003e:\u003cSet Payload\u003e\n 0x30:0xd6:0xff7f   //\u003cIntel General Application\u003e:\u003cGet Payload\u003e\n 0x30:0xd7:0x7f7f   //\u003cIntel General Application\u003e:\u003cSet BIOS Password Hash Info\u003e\n-0x30:0xd8:0xff7f   //\u003cIntel General Application\u003e:\u003cGet Stored BIOS Password\u003e\n+0x30:0xd8:0x0000   //\u003cIntel General Application\u003e:\u003cGet Stored BIOS Password\u003e\n 0x30:0xd9:0x7f7f   //\u003cIntel General Application\u003e:\u003cOOB Update Status\u003e\n 0x30:0xdb:0x7f7f   //\u003cIntel General Application\u003e:\u003cGet/Set BMC Remote Debug Parameters\u003e\n 0x30:0xe2:0xff7f   //\u003cIntel General Application\u003e:\u003cOEM Get Reading\u003e",
      "parentUuid": "4fc4a4b9_e4a4e077",
      "revId": "8d785ab69800825c7aea131ad3f005b3304fa5b2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}